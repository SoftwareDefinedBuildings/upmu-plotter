<template name="s3plot">
    {{> s3plot_plotStyles}}
    <style class="dynamicStyles">
    </style>
    <table class="dispTable" width="99%">
        <tr>
            <td width="30%">
                <div style="margin-left: 20px; margin-right: 25px;">
                    {{> s3plot_timeSelection}}
                    <div class="btn-group-vertical" style="width: 100%">
                        <div class="plotButton btn btn-primary">Apply and Plot</div>
                        <div class="resetZoom btn btn-default">Reset Zoom</div>
                    </div>
                    <div class="plotLoading" style="width: 100%; margin-top: 20px; font-size: 1.25em;"></div> <!-- Displays details about how the plot is loading -->
                    {{> s3plot_streamSelection}}
                </div>
            </td>
            <td width="70%">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="well chartContainer">
                                {{> s3plot_chart}}
                            </div>
                        </div>
                    </div>
                    <div class="well">
                        <div class="row">
                            <div class="col-md-5">
                                {{> s3plot_streamLegend}} 
                            </div>
                            <div class="col-md-7">
                                {{> s3plot_axisLegend}}
                            </div>
                        </div>
                        <div class="row">
                            &nbsp;&nbsp;{{> s3plot_automaticUpdate}}
                        </div>
                    </div>
                    <div class="well">
                        <div class="row">
                            <div class="col-md-4 metadataDisplay"></div>
                            <div class="col-md-3">
                                {{> s3plot_graphExport}}
                            </div>
                            <div class="col-md-5">
                                {{> s3plot_permalink}}
                            </div>
                        </div>
                    </div>
                </div>
            </td>
        </tr>
    </table>
</template>

<template name="s3plot_plotStyles">
    <style class="plotStyles">
        polyline.streamRange {
            fill: inherit;
            fill-opacity: inherit;
            stroke: none;
        }
        polyline.streamMean {
            fill: none;
            stroke: inherit;
            stroke-opacity: 1;
            stroke-width: inherit;
        }
        rect.scrollDisabled {
            visiblity: hidden;
        }
        path, line {
            fill: none;
            stroke: black;
            shape-rendering: crispEdges;
        }
        text.title {
            font-size: 20px;
        }
        text.label {
            font-size: 12px;
        }
        g.tick text {
            font-size: 16px;
        }
        g.data-density-axis text {
            font-size: 14px;
        }
    </style>
</template>

<template name="s3plot_permalink">
    <div class="permalinkGenerate">
        <button class="getPermalink">Generate Permalink</button>
        <input type="checkbox" class="includeMetadata" />
        <span>Embed Stream Metadata</span>
        <div class="permalink"></div>
    </div>
</template>

<template name="s3plot_graphExport">
    <div class="graphExport">
        <button class="makeGraph">Export Graph to SVG Image</button>
        <div class="download-graph"></div>
    </div>
</template>

<template name="s3plot_chart">
    <svg class="chart" width="800" height="430" background="white">
            <rect width="800" height="430" class="background-rect" fill="white"></rect>  <!-- So the background is white, not transparent. -->
            <g class="plotDirections" transform="translate(50, 100)">
                <text transform="translate(0, 0)">1. Select streams from the tree to the left.</text>
                <text transform="translate(0, 30)">2. Select a time range to load data.</text>
                <text transform="translate(0, 60)">3. If desired, change axis settings using the box below.</text>
                <text transform="translate(0, 90)">4. Click "Apply all Settings and Plot Data" to see the graph.</text>
                <text transform="translate(0, 120)">5. Use the mouse to zoom and scroll.</text>
                <text transform="translate(0, 150)">
                                            6. Optional: Change the display settings. By default, all changes to
                    <tspan x="0" dy="1.2em">settings will be applied immediately. If you uncheck the appropriate</tspan>
                    <tspan x="0" dy="1.2em">checkbox below, you must click the "Apply and Plot" button to apply</tspan>
                    <tspan x="0" dy="1.2em">changes.</tspan>
                </text>
            </g>
        </svg>
</template>

<template name="s3plot_streamLegend">
    <div class="streamLegend">
        <h3>Legend</h3>
        <table>
            <tbody class="legend"></tbody>
        </table>
    </div>
</template>

<template name="s3plot_axisLegend">
    <div class="axisLegend">
        <h3>Axes</h3>
        <button class="addAxis">Add a Y-Axis</button>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Streams</th>
                    <th>Units</th>
                </tr>
            </thead>
            <tbody class="axes"></tbody>
        </table>
    </div>
</template>

<template name="s3plot_automaticUpdate">
    <span class="automaticUpdate">
        <input type="checkbox" class="automaticAxisSetting" checked />
        <span>Automatically apply changes to settings</span>
    </span>
</template>


<template name="s3plot_timeSelection">
    <div class="timeSelection">
        <div class="timeselect">
            <form role="form">
                <div class="row">
                    <div class="form-group col-lg3 col-md4">
                        <label>Start date</label>
                        <div class="input-group" style="width:100%">
                            <input type="text" class="form-control datefield startdate" />
                            <div class="m1yButton btn input-group-addon" style="width:4em">-1Y</div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-lg2 col-md3">
                        <label>End date</label>
                        <div class="input-group" style="width:100%">
                            <input type="text" class="form-control datefield enddate">
                            <div class="nowButton btn input-group-addon" style="width:4em">Now</div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-lg2 col-md3">
                        <label>Timezone</label>
                        <div class="input-group" style="width:100%">
                            <select class="timezoneSelect form-control">
                                <option value="America/Los_Angeles">America/Los_Angeles</option>
                                <option value="UTC">UTC</option>
                                <option value="OTHER">Other:</option>
                            </select>
                            <input type="text" class="otherTimezone form-control" style="visibility: hidden;" />
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</template>

<template name="s3plot_streamSelection">
    <div class="streamSelection">
        <h3>Select Streams</h3>
        <div class="updateStreamList btn btn-default">Deselect All and Refresh</div>
        <div class="streamTree"></div>
    </div>
</template>
